using System;
using System.Collections.Generic;
using System.Linq;

// Создание классов для хранения данных
class ГрузовойАвтомобиль
{
    public string Марка { get; set; }
    public int Грузоподъемность { get; set; }
    public DateTime ДатаВыпуска { get; set; }
    public DateTime ДатаКапремонта { get; set; }
    public string ГосНомер { get; set; }
    public string ШифрАвтопарка { get; set; }
}

class Такси
{
    public string Марка { get; set; }
    public int КоличествоМест { get; set; }
    public DateTime ДатаВыпуска { get; set; }
    public string ГосНомер { get; set; }
    public string ШифрАвтопарка { get; set; }
}

class Автопарк
{
    public string Название { get; set; }
    public string Адрес { get; set; }
    public int Площадь { get; set; }
    public string Шифр { get; set; }
}

class Program
{
    static void Main()
    {
        //Создание списков объектов
        List<ГрузовойАвтомобиль> грузовыеАвтомобили = new List<ГрузовойАвтомобиль>()
        {
            new ГрузовойАвтомобиль { Марка = "Scania", Грузоподъемность = 5000, ДатаВыпуска = new DateTime(2001, 01, 10), ДатаКапремонта = new DateTime(2011, 01, 01), ГосНомер = "А123БВ", ШифрАвтопарка = "A1" },
            new ГрузовойАвтомобиль { Марка = "Volvo", Грузоподъемность = 6000, ДатаВыпуска = new DateTime(2002, 02, 20), ДатаКапремонта = new DateTime(2022, 02, 02), ГосНомер = "Г456ДО", ШифрАвтопарка = "A1" },
        };

        List<Такси> такси = new List<Такси>()
        {
            new Такси { Марка = "Lada", КоличествоМест = 4, ДатаВыпуска = new DateTime(2020, 10, 2), ГосНомер = "У323УУ", ШифрАвтопарка = "A2" },
            new Такси { Марка = "Lada", КоличествоМест = 4, ДатаВыпуска = new DateTime(2020, 10, 2), ГосНомер = "Г866ОУ", ШифрАвтопарка = "A2" },
            new Такси { Марка = "Kia", КоличествоМест = 6, ДатаВыпуска = new DateTime(2021, 12, 15), ГосНомер = "Д566ОО", ШифрАвтопарка = "A2" }
        };

        List<Автопарк> автопарки = new List<Автопарк>()
        {
            new Автопарк { Название = "Автопарк1", Адрес = "ул. Краснококшайская, 154", Площадь = 1000, Шифр = "A1" },
            new Автопарк { Название = "Автопарк2", Адрес = "ул. Московская, 1", Площадь = 1500, Шифр = "A2" },
        };

        //Выборка грузовых автомобилей отсортированная по дате выпуска
        Console.WriteLine("Выборка грузовых автомобилей отсортированная по дате выпуска:");
        var отсортированныеГрузовыеАвтомобили = грузовыеАвтомобили.OrderBy(g => g.ДатаВыпуска);

        foreach (var автомобиль in отсортированныеГрузовыеАвтомобили)
        {
            Console.WriteLine($"{автомобиль.Марка}, {автомобиль.ДатаВыпуска}");
        }

        //Группировка такси по марке автомобиля и по дате выпуска
        Console.WriteLine("\nГруппировка такси по марке и дате выпуска:");
        var группировкаТакси = такси.GroupBy(t => new { t.Марка, t.ДатаВыпуска });

        foreach (var группа in группировкаТакси)
        {
            Console.WriteLine($"{группа.Key.Марка}, {группа.Key.ДатаВыпуска}, количество: {группа.Count()}");
        }

        //Подсчет количества такси в автопарке Автопарк2
        var количествоТаксиВАвтопарке = такси.Count(t => t.ШифрАвтопарка == "A2");

        Console.WriteLine($"\nКоличество такси в автопарке 'Автопарк2': {количествоТаксиВАвтопарке}");

        //Соединение грузового автомобиля и автопарка по шифру
        Console.WriteLine("\nСоединение грузового автомобиля и автопарка:");
        var соединение = from грузовоеАвто in грузовыеАвтомобили
                         join автопарк in автопарки on грузовоеАвто.ШифрАвтопарка equals автопарк.Шифр
                         select new
                         {
                             Автопарк = автопарк.Название,
                             ТипАвтомобиля = "Грузовой",
                             ГосНомер = грузовоеАвто.ГосНомер
                         };

        foreach (var элемент in соединение)
        {
            Console.WriteLine($"Автопарк: {элемент.Автопарк}, Тип: {элемент.ТипАвтомобиля}, Гос. номер: {элемент.ГосНомер}");
        }
    }
}
